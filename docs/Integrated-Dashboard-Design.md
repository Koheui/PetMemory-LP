# 🎨 統合ダッシュボード設計書

## 📋 **概要**

決済完了後、顧客が1つの画面で想い出ページ作成からアクリルスタンド制作依頼まで完結できる統合ダッシュボード。

## 🎯 **設計方針**

### **1. ワンストップ体験**
- 決済完了 → 即座にダッシュボード表示
- 複数画面への遷移を最小化
- 進捗状況の可視化

### **2. ガイド付き操作**
- ステップバイステップのガイド
- 直感的なUI/UX
- エラー防止機能

### **3. 自動化 + カスタマイズ**
- デフォルト設定の自動適用
- 必要に応じたカスタマイズ
- プレビュー機能

## 🏗️ **画面構成**

### **メインダッシュボード**
```
┌─────────────────────────────────────────────────────────┐
│ 🎉 決済完了！想い出ページを作成しましょう                │
├─────────────────────────────────────────────────────────┤
│ 進捗状況: [████████░░] 80% 完了                         │
│                                                         │
│ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐        │
│ │ ✅ Step 1   │ │ ✅ Step 2   │ │ 🔄 Step 3   │        │
│ │ 基本情報    │ │ 写真選択    │ │ レイアウト  │        │
│ └─────────────┘ └─────────────┘ └─────────────┘        │
│                                                         │
│ ┌─────────────┐ ┌─────────────┐                        │
│ │ ⏳ Step 4   │ │ ⏳ Step 5   │                        │
│ │ プレビュー  │ │ 制作依頼    │                        │
│ └─────────────┘ └─────────────┘                        │
└─────────────────────────────────────────────────────────┘
```

### **Step 1: 基本情報入力**
```
┌─────────────────────────────────────────────────────────┐
│ 📝 Step 1: 基本情報を入力してください                    │
├─────────────────────────────────────────────────────────┤
│ ペットの名前: [________________]                        │
│ メッセージ:   [________________]                        │
│                      [________________]                 │
│                      [________________]                 │
│                                                         │
│ テンプレート選択:                                       │
│ ○ シンプル    ○ エレガント  ○ カラフル                │
│                                                         │
│ [次へ進む]                                             │
└─────────────────────────────────────────────────────────┘
```

### **Step 2: 写真アップロード**
```
┌─────────────────────────────────────────────────────────┐
│ 📸 Step 2: 写真をアップロードしてください                │
├─────────────────────────────────────────────────────────┤
│                                                         │
│     ┌─────────────────────────────────────────┐        │
│     │                                         │        │
│     │     📁 写真をドラッグ&ドロップ          │        │
│     │     またはクリックして選択               │        │
│     │                                         │        │
│     └─────────────────────────────────────────┘        │
│                                                         │
│ アップロード済み:                                       │
│ 🖼️ photo1.jpg  🖼️ photo2.jpg  🖼️ photo3.jpg          │
│                                                         │
│ [次へ進む]                                             │
└─────────────────────────────────────────────────────────┘
```

### **Step 3: レイアウト選択**
```
┌─────────────────────────────────────────────────────────┐
│ 🎨 Step 3: レイアウトを選択してください                  │
├─────────────────────────────────────────────────────────┤
│                                                         │
│ ┌─────────┐ ┌─────────┐ ┌─────────┐                    │
│ │ レイアウト1 │ レイアウト2 │ レイアウト3 │                    │
│ │ [プレビュー] │ [プレビュー] │ [プレビュー] │                    │
│ └─────────┘ └─────────┘ └─────────┘                    │
│                                                         │
│ 選択中: レイアウト2                                      │
│                                                         │
│ [次へ進む]                                             │
└─────────────────────────────────────────────────────────┘
```

### **Step 4: プレビュー確認**
```
┌─────────────────────────────────────────────────────────┐
│ 👀 Step 4: プレビューを確認してください                  │
├─────────────────────────────────────────────────────────┤
│                                                         │
│ ┌─────────────────────────────────────────────────────┐ │
│ │               アクリルスタンドプレビュー              │ │
│ │                                                     │ │
│ │  ┌─────────────┐                                    │ │
│ │  │ ペットの写真 │                                    │ │
│ │  │             │                                    │ │
│ │  └─────────────┘                                    │ │
│ │                                                     │ │
│ │  ペットの名前                                       │ │
│ │  メッセージ                                         │ │
│ │                                                     │ │
│ └─────────────────────────────────────────────────────┘ │
│                                                         │
│ [修正する] [制作依頼を送信]                             │
└─────────────────────────────────────────────────────────┘
```

### **Step 5: 制作依頼**
```
┌─────────────────────────────────────────────────────────┐
│ 🚀 Step 5: 制作依頼を送信します                         │
├─────────────────────────────────────────────────────────┤
│                                                         │
│ ✅ 制作内容確認:                                        │
│   • アクリルスタンド: 1個                               │
│   • サイズ: 標準サイズ                                 │
│   • 配送先: 登録済み住所                                │
│                                                         │
│ 📅 予定:                                                │
│   • 制作開始: 1-2営業日後                               │
│   • 完成予定: 1-2週間後                                │
│   • 配送: 完成後2-3日                                  │
│                                                         │
│ 📧 進捗通知: メールでお知らせします                    │
│                                                         │
│ [制作依頼を送信]                                       │
└─────────────────────────────────────────────────────────┘
```

## 🔄 **データフロー**

### **1. 決済完了時**
```
Stripe決済完了 → Webhook → 秘密鍵生成 → ダッシュボードURL生成 → メール送信
```

### **2. ダッシュボードアクセス**
```
メールリンク → 秘密鍵認証 → ダッシュボード表示 → 進捗復元
```

### **3. 制作依頼**
```
制作依頼送信 → Firestore保存 → 制作チーム通知 → 進捗管理開始
```

## 🛠️ **技術実装**

### **1. フロントエンド**
```javascript
// 統合ダッシュボード
class MemoryCreationDashboard {
  constructor(secretKey) {
    this.secretKey = secretKey;
    this.currentStep = 1;
    this.formData = {};
  }
  
  // ステップ進行
  nextStep() {
    this.currentStep++;
    this.updateProgress();
    this.renderStep();
  }
  
  // データ保存
  saveProgress() {
    // Firestoreに進捗保存
  }
  
  // 制作依頼送信
  submitOrder() {
    // 制作チームに通知
  }
}
```

### **2. バックエンド**
```javascript
// 制作依頼API
app.post('/api/memory/order', async (req, res) => {
  const { secretKey, formData, photos } = req.body;
  
  // 1. 秘密鍵検証
  const user = await validateSecretKey(secretKey);
  
  // 2. 制作依頼作成
  const order = await createMemoryOrder({
    userId: user.uid,
    formData,
    photos,
    status: 'pending'
  });
  
  // 3. 制作チームに通知
  await notifyProductionTeam(order);
  
  // 4. 顧客に確認メール
  await sendOrderConfirmation(user.email, order);
  
  res.json({ success: true, orderId: order.id });
});
```

## 📊 **進捗管理システム**

### **顧客向け進捗表示**
```
制作状況: 進行中
├── ✅ 受付完了 (1/5)
├── 🔄 制作中 (2/5)
├── ⏳ 品質チェック (3/5)
├── ⏳ 梱包 (4/5)
└── ⏳ 配送 (5/5)

予定完了日: 2025年1月20日
```

### **制作チーム向け管理画面**
```
制作依頼一覧
├── 新規依頼 (3件)
├── 制作中 (5件)
├── 完成待ち (2件)
└── 配送済み (12件)
```

## 🎯 **オペレーション改善効果**

### **Before (現在)**
- 決済 → メール → CMS → 作成 → 依頼 (5ステップ)
- 顧客の離脱率: 30-40%
- 制作開始まで: 3-7日

### **After (改善後)**
- 決済 → ダッシュボード → 完成 (2ステップ)
- 顧客の離脱率: 10-15%
- 制作開始まで: 即日

## 🚀 **実装優先順位**

### **Phase 1: 基本ダッシュボード (1週間)**
1. 統合ダッシュボードUI
2. ステップ進行機能
3. データ保存機能

### **Phase 2: 自動化機能 (1週間)**
1. テンプレート自動生成
2. プレビュー機能
3. 制作依頼システム

### **Phase 3: 進捗管理 (1週間)**
1. 進捗表示機能
2. 制作チーム管理画面
3. 通知システム

## 💡 **追加アイデア**

### **1. AI支援機能**
- 写真の自動トリミング
- レイアウトの自動最適化
- メッセージの提案

### **2. ソーシャル機能**
- 完成品のシェア機能
- レビュー・評価システム
- リピート注文機能

### **3. アップセル機能**
- 追加オプションの提案
- ギフト包装オプション
- 複数個注文の割引

この統合ダッシュボードにより、顧客の操作負荷を大幅に軽減し、制作までの時間を短縮できます！
