<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>emolink | 大切な想い出を永遠に</title>
    <meta name="description" content="大切な想い出を美しいアクリルスタンドと専用ページで永遠に残しませんか？NFCタグで簡単アクセス、QRコード同梱で安心。">
    <meta name="keywords" content="想い出,メモリアル,NFC,アクリルスタンド,QRコード,emolink">
    
    <!-- Open Graph -->
    <meta property="og:title" content="emolink | 大切な想い出を永遠に">
    <meta property="og:description" content="大切な想い出を美しいアクリルスタンドと専用ページで永遠に残しませんか？">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://lp.example.com">
    <meta property="og:image" content="https://lp.example.com/assets/og-image.jpg">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon-16x16.png">
    
    <!-- Styles -->
    <link rel="stylesheet" href="css/main.css">
    
    <!-- reCAPTCHA v3 -->
    <script src="https://www.google.com/recaptcha/api.js?render=6LeCp7wrAAAAACXaot0OR0ClPJ-jeM7f17OpfkoX"></script>
    
    <!-- Stripe.js -->
    <script src="https://js.stripe.com/v3/"></script>
</head>
<body>
    <!-- Skip to content link for accessibility -->
    <a href="#main-content" class="skip-link">メインコンテンツにスキップ</a>
    
    <!-- Navigation -->
    <nav class="nav">
        <div class="nav-container">
            <div class="nav-logo">
                <h1>emolink</h1>
            </div>
            <div class="nav-menu">
                <a href="#experience" class="nav-link">体験イメージ</a>
                <a href="#demo" class="nav-link">デモページ</a>
                <a href="#price" class="nav-link">料金</a>
                <a href="#order" class="nav-link">お申し込み</a>
                <button class="btn btn-secondary nav-login" id="loginBtn">ログイン</button>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero" id="hero" id="main-content">
        <div class="hero-background"></div>
        <div class="hero-content">
            <div class="hero-text">
                <h1 class="hero-title">
                    大切な想い出を<br>
                    永遠に残しませんか？
                </h1>
                <p class="hero-subtitle">
                    美しい想い出のひと時をアクリルスタンドにして<br>
                    スマートフォンからいつでもアクセス可能に
                </p>
                <a href="#order" class="btn btn-primary hero-cta">
                    今すぐ申し込む
                </a>
            </div>
            <div class="hero-image">
                <div class="hero-carousel">
                    <div class="carousel-container">
                        <img src="assets/hero-carousel-01.png" alt="NFCタグ付きアクリルスタンド" class="hero-product carousel-slide active">
                        <img src="assets/hero-carousel-02.png" alt="アクリルスタンドの使用例" class="hero-product carousel-slide">
                        <img src="assets/hero-carousel-03.png" alt="NFCタグ技術" class="hero-product carousel-slide">
                        <img src="assets/hero-carousel-04.png" alt="完成イメージ" class="hero-product carousel-slide">
                    </div>
                    <div class="carousel-indicators">
                        <button class="carousel-indicator active" data-slide="0"></button>
                        <button class="carousel-indicator" data-slide="1"></button>
                        <button class="carousel-indicator" data-slide="2"></button>
                        <button class="carousel-indicator" data-slide="3"></button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Experience Section -->
    <section class="experience" id="experience">
        <div class="container">
            <h2 class="section-title">体験イメージ</h2>
            <div class="experience-content">
                <div class="experience-image">
                    <img src="assets/hero-product.png" alt="アクリルスタンドの使用例" class="experience-main-image">
                    <div class="experience-overlay">
                        <div class="experience-text">
                            <h3>スマートフォンをかざすだけ</h3>
                            <p>NFCタグにスマートフォンをかざすと、専用の想い出ページが表示されます。QRコードも同梱しているので、どの端末からでもアクセス可能です。</p>
                        </div>
                    </div>
                </div>
                <div class="experience-features">
                    <div class="experience-feature">
                        <div class="feature-icon">
                            <img src="assets/icon-memory-page.svg" alt="想い出ページ">
                        </div>
                        <h4>美しい想い出ページ</h4>
                        <p>写真、動画、メッセージを自由に編集できる専用ページ</p>
                    </div>
                    <div class="experience-feature">
                        <div class="feature-icon">
                            <img src="assets/icon-acrylic-stand.svg" alt="アクリルスタンド">
                        </div>
                        <h4>高品質アクリルスタンド</h4>
                        <p>透明度の高いアクリル素材で美しく仕上げ</p>
                    </div>
                    <div class="experience-feature">
                        <div class="feature-icon">
                            <img src="assets/icon-nfc-qr.svg" alt="NFC・QRコード">
                        </div>
                        <h4>簡単アクセス</h4>
                        <p>NFCタグとQRコードで確実なアクセス</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Demo Section -->
    <section class="demo" id="demo">
        <div class="container">
            <h2 class="section-title">デモページ</h2>
            <div class="demo-content">
                <div class="demo-text">
                    <h3>実際の想い出ページを体験</h3>
                    <p>CMSで作成された実際の想い出ページをご覧いただけます。どのようなページが作成できるか、ぜひ体験してみてください。</p>
                    <a href="https://mem.example.com/p/demo" class="btn btn-secondary" target="_blank" rel="noopener">
                        デモページを見る
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M7 17L17 7M17 7H7M17 7V17"/>
                        </svg>
                    </a>
                </div>
                <div class="demo-preview">
                    <div class="demo-frame">
                        <div class="demo-header">
                            <div class="demo-dots">
                                <span></span>
                                <span></span>
                                <span></span>
                            </div>
                        </div>
                        <div class="demo-content-preview">
                            <div class="demo-image-placeholder"></div>
                            <div class="demo-text-preview">
                                <h4>大切な想い出</h4>
                                <p>ここに写真やメッセージが表示されます</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Flow Section -->
    <section class="flow" id="flow">
        <div class="container">
            <h2 class="section-title">ご利用の流れ</h2>
            <div class="flow-steps">
                <div class="flow-step">
                    <div class="flow-number">1</div>
                    <div class="flow-content">
                        <h3>メール送信</h3>
                        <p>下記フォームからメールアドレスを入力して送信</p>
                    </div>
                </div>
                <div class="flow-arrow">→</div>
                <div class="flow-step">
                    <div class="flow-number">2</div>
                    <div class="flow-content">
                        <h3>認証・ページ作成</h3>
                        <p>届いたメールのリンクから想い出ページを作成開始</p>
                    </div>
                </div>
                <div class="flow-arrow">→</div>
                <div class="flow-step">
                    <div class="flow-number">3</div>
                    <div class="flow-content">
                        <h3>編集・公開</h3>
                        <p>写真やメッセージを追加して想い出ページを公開</p>
                    </div>
                </div>
                <div class="flow-arrow">→</div>
                <div class="flow-step">
                    <div class="flow-number">4</div>
                    <div class="flow-content">
                        <h3>制作・発送</h3>
                        <p>アクリルスタンドを制作し、NFC・QRと一緒にお届け</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Price Section - 完全独立版 -->
    <div id="price" style="display: block !important; visibility: visible !important; padding: 4rem 0; background-color: #f8fafc; margin: 0; width: 100%; min-height: 600px;">
        <div style="max-width: 1200px; margin: 0 auto; padding: 0 1rem;">
            <h2 style="font-size: 1.875rem; font-weight: 700; text-align: center; margin-bottom: 4rem; color: #1f2937;">料金プラン</h2>
            <div style="display: grid !important; visibility: visible !important; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; margin-bottom: 2rem;">
                
                <!-- 6cm サイズ -->
                <div style="background: #ffffff; border-radius: 0.75rem; padding: 2rem; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); border: 2px solid transparent; transition: all 0.3s ease; position: relative;">
                    <div style="background: linear-gradient(135deg, #2563eb, #3b82f6); color: #ffffff; padding: 2rem; text-align: center; border-radius: 0.75rem 0.75rem 0 0; margin: -2rem -2rem 2rem -2rem;">
                        <h3 style="font-size: 1.5rem; font-weight: 600; margin-bottom: 1rem;">6cm サイズ</h3>
                        <div style="display: flex; align-items: baseline; justify-content: center; gap: 0.5rem;">
                            <span style="font-size: 1.25rem; font-weight: 600;">¥</span>
                            <span style="font-size: 3rem; font-weight: 700;">4,500</span>
                            <span style="font-size: 1.125rem; opacity: 0.8;">（税込）</span>
                        </div>
                    </div>
                    <div style="padding: 0;">
                        <ul style="list-style: none; margin: 0; padding: 0;">
                            <li style="padding: 0.75rem 0; border-bottom: 1px solid #e5e7eb; position: relative; padding-left: 1.5rem;">✓ 専用想い出ページ作成・編集</li>
                            <li style="padding: 0.75rem 0; border-bottom: 1px solid #e5e7eb; position: relative; padding-left: 1.5rem;">✓ アクリルスタンド（6cm）</li>
                            <li style="padding: 0.75rem 0; border-bottom: 1px solid #e5e7eb; position: relative; padding-left: 1.5rem;">✓ NFCタグ書き込み</li>
                            <li style="padding: 0.75rem 0; border-bottom: 1px solid #e5e7eb; position: relative; padding-left: 1.5rem;">✓ QRコード印刷物同梱</li>
                            <li style="padding: 0.75rem 0; position: relative; padding-left: 1.5rem;">✓ 全国送料無料</li>
                        </ul>
                    </div>
                    <button onclick="selectPrice('6cm', 4500)" style="width: 100%; margin-top: 1.5rem; display: inline-flex; align-items: center; justify-content: center; padding: 0.75rem 1.5rem; border: none; border-radius: 0.75rem; font-size: 1rem; font-weight: 600; text-align: center; cursor: pointer; transition: all 0.2s ease; text-decoration: none; min-height: 44px; background-color: #2563eb; color: #ffffff; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);">
                        6cmサイズを選ぶ
                    </button>
                </div>
                
                <!-- 10cm サイズ（おすすめ） -->
                <div style="background: #ffffff; border-radius: 0.75rem; padding: 2rem; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); border: 2px solid #2563eb; transition: all 0.3s ease; position: relative; transform: scale(1.05);">
                    <div style="position: absolute; top: -12px; left: 50%; transform: translate(-50%); background: #2563eb; color: #ffffff; padding: 0.5rem 1.5rem; border-radius: 0.5rem; font-size: 0.875rem; font-weight: 600;">おすすめ</div>
                    <div style="background: linear-gradient(135deg, #2563eb, #3b82f6); color: #ffffff; padding: 2rem; text-align: center; border-radius: 0.75rem 0.75rem 0 0; margin: -2rem -2rem 2rem -2rem;">
                        <h3 style="font-size: 1.5rem; font-weight: 600; margin-bottom: 1rem;">10cm サイズ</h3>
                        <div style="display: flex; align-items: baseline; justify-content: center; gap: 0.5rem;">
                            <span style="font-size: 1.25rem; font-weight: 600;">¥</span>
                            <span style="font-size: 3rem; font-weight: 700;">6,000</span>
                            <span style="font-size: 1.125rem; opacity: 0.8;">（税込）</span>
                        </div>
                    </div>
                    <div style="padding: 0;">
                        <ul style="list-style: none; margin: 0; padding: 0;">
                            <li style="padding: 0.75rem 0; border-bottom: 1px solid #e5e7eb; position: relative; padding-left: 1.5rem;">✓ 専用想い出ページ作成・編集</li>
                            <li style="padding: 0.75rem 0; border-bottom: 1px solid #e5e7eb; position: relative; padding-left: 1.5rem;">✓ アクリルスタンド（10cm）</li>
                            <li style="padding: 0.75rem 0; border-bottom: 1px solid #e5e7eb; position: relative; padding-left: 1.5rem;">✓ NFCタグ書き込み</li>
                            <li style="padding: 0.75rem 0; border-bottom: 1px solid #e5e7eb; position: relative; padding-left: 1.5rem;">✓ QRコード印刷物同梱</li>
                            <li style="padding: 0.75rem 0; position: relative; padding-left: 1.5rem;">✓ 全国送料無料</li>
                        </ul>
                    </div>
                    <button onclick="selectPrice('10cm', 6000)" style="width: 100%; margin-top: 1.5rem; display: inline-flex; align-items: center; justify-content: center; padding: 0.75rem 1.5rem; border: none; border-radius: 0.75rem; font-size: 1rem; font-weight: 600; text-align: center; cursor: pointer; transition: all 0.2s ease; text-decoration: none; min-height: 44px; background-color: #2563eb; color: #ffffff; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);">
                        10cmサイズを選ぶ
                    </button>
                </div>
                
                <!-- 14cm サイズ -->
                <div style="background: #ffffff; border-radius: 0.75rem; padding: 2rem; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); border: 2px solid transparent; transition: all 0.3s ease; position: relative;">
                    <div style="background: linear-gradient(135deg, #2563eb, #3b82f6); color: #ffffff; padding: 2rem; text-align: center; border-radius: 0.75rem 0.75rem 0 0; margin: -2rem -2rem 2rem -2rem;">
                        <h3 style="font-size: 1.5rem; font-weight: 600; margin-bottom: 1rem;">14cm サイズ</h3>
                        <div style="display: flex; align-items: baseline; justify-content: center; gap: 0.5rem;">
                            <span style="font-size: 1.25rem; font-weight: 600;">¥</span>
                            <span style="font-size: 3rem; font-weight: 700;">8,000</span>
                            <span style="font-size: 1.125rem; opacity: 0.8;">（税込）</span>
                        </div>
                    </div>
                    <div style="padding: 0;">
                        <ul style="list-style: none; margin: 0; padding: 0;">
                            <li style="padding: 0.75rem 0; border-bottom: 1px solid #e5e7eb; position: relative; padding-left: 1.5rem;">✓ 専用想い出ページ作成・編集</li>
                            <li style="padding: 0.75rem 0; border-bottom: 1px solid #e5e7eb; position: relative; padding-left: 1.5rem;">✓ アクリルスタンド（14cm）</li>
                            <li style="padding: 0.75rem 0; border-bottom: 1px solid #e5e7eb; position: relative; padding-left: 1.5rem;">✓ NFCタグ書き込み</li>
                            <li style="padding: 0.75rem 0; border-bottom: 1px solid #e5e7eb; position: relative; padding-left: 1.5rem;">✓ QRコード印刷物同梱</li>
                            <li style="padding: 0.75rem 0; position: relative; padding-left: 1.5rem;">✓ 全国送料無料</li>
                        </ul>
                    </div>
                    <button onclick="selectPrice('14cm', 8000)" style="width: 100%; margin-top: 1.5rem; display: inline-flex; align-items: center; justify-content: center; padding: 0.75rem 1.5rem; border: none; border-radius: 0.75rem; font-size: 1rem; font-weight: 600; text-align: center; cursor: pointer; transition: all 0.2s ease; text-decoration: none; min-height: 44px; background-color: #2563eb; color: #ffffff; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);">
                        14cmサイズを選ぶ
                    </button>
                </div>
            </div>
            <div style="background-color: #f8fafc; padding: 1.5rem; text-align: center; border-radius: 0.75rem;">
                <p style="color: #2563eb; font-weight: 600; margin: 0;"><strong>買い切り価格</strong>で月額費用は一切かかりません</p>
            </div>
        </div>
    </div>

    <!-- Order Form Section -->
    <section class="order" id="order" style="display: none;">
        <div class="container">
            <h2 class="section-title">お申し込み</h2>
            
            <!-- ステップインジケーター -->
            <div class="step-indicator" id="stepIndicator">
                <div class="step active" data-step="1">
                    <div class="step-number">1</div>
                    <div class="step-label">サイズ選択</div>
                </div>
                <div class="step" data-step="2">
                    <div class="step-number">2</div>
                    <div class="step-label">基本情報</div>
                </div>
                <div class="step" data-step="3">
                    <div class="step-number">3</div>
                    <div class="step-label">写真アップロード</div>
                </div>
                <div class="step" data-step="4">
                    <div class="step-number">4</div>
                    <div class="step-label">配送先</div>
                </div>
                <div class="step" data-step="5">
                    <div class="step-number">5</div>
                    <div class="step-label">決済</div>
                </div>
            </div>
            
            <!-- プログレスバー -->
            <div class="progress-bar">
                <div class="progress" id="progressBar" style="width: 20%"></div>
            </div>
            
            <div class="order-form-container">
                <!-- ステップ1: サイズ選択 -->
                <div id="step-1" class="step-content">
                    <div class="step-header">
                        <h3>サイズを選択してください</h3>
                        <p>お好みのサイズを選択してください</p>
                    </div>
                    <!-- メインのprice-gridを使用 -->
                    
                    <!-- 次へボタン -->
                    <div style="text-align: center; margin-top: 2rem;">
                        <button type="button" class="btn btn-primary" onclick="goToPayment()" style="display: none;" id="step1NextBtn">
                            次へ
                        </button>
                    </div>
                </div>
                
                <!-- ステップ2: 基本情報入力 -->
                <div id="step-2" class="step-content" style="display: none;">
                    <div class="step-header">
                        <h3>基本情報を入力してください</h3>
                        <p>メールアドレスと電話番号を入力してください</p>
                    </div>
                    <div class="form-group">
                        <label for="email" class="form-label">メールアドレス *</label>
                        <input 
                            type="email" 
                            id="email" 
                            name="email" 
                            class="form-input" 
                            required 
                            placeholder="your@example.com"
                        >
                        <div class="form-error" id="emailError"></div>
                    </div>
                    <div class="form-group">
                        <label for="phone" class="form-label">電話番号</label>
                        <input 
                            type="tel" 
                            id="phone" 
                            name="phone" 
                            class="form-input" 
                            placeholder="090-1234-5678"
                        >
                    </div>
                </div>
                
                <!-- ステップ3: 写真アップロード -->
                <div id="step-3" class="step-content" style="display: none;">
                    <div class="step-header">
                        <h3>写真をアップロードしてください</h3>
                        <p>アクリルスタンドに使用したい写真を選択してください</p>
                    </div>
                    <div class="photo-upload-area">
                        <input type="file" id="photoInput" accept="image/*" multiple>
                        <div class="upload-preview" id="photoPreview"></div>
                    </div>
                </div>
                
                <!-- ステップ4: 配送先入力 -->
                <div id="step-4" class="step-content" style="display: none;">
                    <div class="step-header">
                        <h3>配送先情報を入力してください</h3>
                        <p>アクリルスタンドの配送先を入力してください</p>
                    </div>
                    <div class="form-group">
                        <label for="shippingName" class="form-label">配送先名 *</label>
                        <input 
                            type="text" 
                            id="shippingName" 
                            name="shippingName" 
                            class="form-input" 
                            required 
                            placeholder="田中太郎"
                        >
                    </div>
                    <div class="form-group">
                        <label for="postalCode" class="form-label">郵便番号 *</label>
                        <input 
                            type="text" 
                            id="postalCode" 
                            name="postalCode" 
                            class="form-input" 
                            required 
                            placeholder="123-4567"
                            pattern="[0-9]{3}-[0-9]{4}"
                        >
                    </div>
                    <div class="form-group">
                        <label for="prefecture" class="form-label">都道府県 *</label>
                        <select id="prefecture" name="prefecture" class="form-input" required>
                            <option value="">選択してください</option>
                            <option value="北海道">北海道</option>
                            <option value="青森県">青森県</option>
                            <option value="岩手県">岩手県</option>
                            <option value="宮城県">宮城県</option>
                            <option value="秋田県">秋田県</option>
                            <option value="山形県">山形県</option>
                            <option value="福島県">福島県</option>
                            <option value="茨城県">茨城県</option>
                            <option value="栃木県">栃木県</option>
                            <option value="群馬県">群馬県</option>
                            <option value="埼玉県">埼玉県</option>
                            <option value="千葉県">千葉県</option>
                            <option value="東京都">東京都</option>
                            <option value="神奈川県">神奈川県</option>
                            <option value="新潟県">新潟県</option>
                            <option value="富山県">富山県</option>
                            <option value="石川県">石川県</option>
                            <option value="福井県">福井県</option>
                            <option value="山梨県">山梨県</option>
                            <option value="長野県">長野県</option>
                            <option value="岐阜県">岐阜県</option>
                            <option value="静岡県">静岡県</option>
                            <option value="愛知県">愛知県</option>
                            <option value="三重県">三重県</option>
                            <option value="滋賀県">滋賀県</option>
                            <option value="京都府">京都府</option>
                            <option value="大阪府">大阪府</option>
                            <option value="兵庫県">兵庫県</option>
                            <option value="奈良県">奈良県</option>
                            <option value="和歌山県">和歌山県</option>
                            <option value="鳥取県">鳥取県</option>
                            <option value="島根県">島根県</option>
                            <option value="岡山県">岡山県</option>
                            <option value="広島県">広島県</option>
                            <option value="山口県">山口県</option>
                            <option value="徳島県">徳島県</option>
                            <option value="香川県">香川県</option>
                            <option value="愛媛県">愛媛県</option>
                            <option value="高知県">高知県</option>
                            <option value="福岡県">福岡県</option>
                            <option value="佐賀県">佐賀県</option>
                            <option value="長崎県">長崎県</option>
                            <option value="熊本県">熊本県</option>
                            <option value="大分県">大分県</option>
                            <option value="宮崎県">宮崎県</option>
                            <option value="鹿児島県">鹿児島県</option>
                            <option value="沖縄県">沖縄県</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="city" class="form-label">市区町村 *</label>
                        <input 
                            type="text" 
                            id="city" 
                            name="city" 
                            class="form-input" 
                            required 
                            placeholder="渋谷区"
                        >
                    </div>
                    <div class="form-group">
                        <label for="address1" class="form-label">住所1 *</label>
                        <input 
                            type="text" 
                            id="address1" 
                            name="address1" 
                            class="form-input" 
                            required 
                            placeholder="道玄坂1-2-3"
                        >
                    </div>
                    <div class="form-group">
                        <label for="address2" class="form-label">住所2（マンション名等）</label>
                        <input 
                            type="text" 
                            id="address2" 
                            name="address2" 
                            class="form-input" 
                            placeholder="○○マンション101号室"
                        >
                    </div>
                </div>
                
                <!-- ステップ5: 決済 -->
                <div id="step-5" class="step-content" style="display: none;">
                    <div class="step-header">
                        <h3>お支払い情報を入力してください</h3>
                        <p>カード情報を入力して決済を完了してください</p>
                    </div>
                    <div class="form-group">
                        <label class="form-label">お支払い情報</label>
                        <div id="card-element" class="stripe-card-element">
                            <!-- Stripe Elements will create form elements here -->
                        </div>
                        <div id="card-errors" class="form-error" role="alert"></div>
                    </div>
                </div>
                
                <!-- ナビゲーションボタン -->
                <div class="step-navigation">
                    <button type="button" class="btn btn-secondary" id="prevBtn" onclick="prevStep()" style="display: none;">
                        前へ
                    </button>
                    <button type="button" class="btn btn-primary" id="submitBtn" onclick="submitOrder()" style="display: none;">
                        決済完了
                    </button>
                </div>
                
                <div class="form-error" id="generalError" style="display: none;"></div>
            </div>
                
                <!-- 成功メッセージ（フォームの外に配置） -->
                <div class="form-success" id="successMessage" style="display: none;">
                    <h3>決済完了</h3>
                    <p>お支払いが完了しました。秘密鍵をメールでお送りいたしますので、受信ボックスをご確認ください。</p>
                    <p>メール内の秘密鍵でCMSにログインして、想い出ページの作成を開始してください。</p>
                </div>
                
                <div class="order-notes">
                    <h4>ご注意事項</h4>
                    <ul>
                        <li>秘密鍵の有効期限は30日間です</li>
                        <li>秘密鍵は一度使用すると無効になります</li>
                        <li>迷惑メールフォルダもご確認ください</li>
                        <li>制作期間は通常1〜2週間程度です</li>
                        <li>お支払いは決済完了と同時に処理されます</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <h3>emolink</h3>
                    <p>大切な想い出を永遠に</p>
                </div>
                <div class="footer-links">
                    <div class="footer-column">
                        <h4>サービス</h4>
                        <a href="#experience">体験イメージ</a>
                        <a href="#demo">デモページ</a>
                        <a href="#price">料金</a>
                    </div>
                    <div class="footer-column">
                        <h4>サポート</h4>
                        <a href="mailto:office@futurestudio.co.jp">お問い合わせ</a>
                        <a href="/legal.html">特定商取引法に基づく表記</a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 emolink. All rights reserved.</p>
                <p style="font-size: 12px; color: #6b7280; margin-top: 8px;">v1.1.1</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script type="module" src="js/main.js"></script>
    <script type="module" src="js/product-catalog.js"></script>
    <script type="module" src="js/step-input.js"></script>
    <script type="module" src="js/stripe-payment.js"></script>
    
    <script>
        // 料金プラン選択関数
        function selectPrice(size, price) {
            console.log('選択されたサイズ:', size, '価格:', price);
            
            // 選択された商品情報を保存
            localStorage.setItem('selectedProduct', JSON.stringify({
                size: size,
                price: price
            }));
            
            // 選択されたサイズを表示
            showSelectedSize(size, price);
            
            // 段階的入力フローを開始
            startStepInputFlow();
        }
        
        // 選択されたサイズを表示する関数
        function showSelectedSize(size, price) {
            const step1 = document.getElementById('step-1');
            if (step1) {
                // 既存の選択表示を削除
                const existingSelected = step1.querySelector('.selected-size-info');
                if (existingSelected) {
                    existingSelected.remove();
                }
                
                // 選択されたサイズの表示を追加
                const selectedInfo = document.createElement('div');
                selectedInfo.className = 'selected-size-info';
                selectedInfo.style.cssText = 'background: #f0f9ff; border: 2px solid #2563eb; border-radius: 0.75rem; padding: 1rem; margin: 1rem 0; text-align: center; position: relative;';
                selectedInfo.innerHTML = `
                    <button onclick="removeSelectedSize()" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #ef4444; color: white; border: none; border-radius: 50%; width: 24px; height: 24px; cursor: pointer; font-size: 14px; display: flex; align-items: center; justify-content: center;">×</button>
                    <h4 style="color: #2563eb; margin: 0 0 0.5rem 0; font-size: 1.125rem;">選択されたサイズ</h4>
                    <p style="margin: 0; font-size: 1.25rem; font-weight: 600; color: #1f2937;">${size} サイズ - ¥${price.toLocaleString()}（税込）</p>
                `;
                step1.appendChild(selectedInfo);
                
                // 「次へ」ボタンを表示
                const nextBtn = document.getElementById('step1NextBtn');
                if (nextBtn) {
                    nextBtn.style.display = 'inline-flex';
                }
            }
        }
        
        // 選択されたサイズを削除する関数
        function removeSelectedSize() {
            const step1 = document.getElementById('step-1');
            if (step1) {
                const selectedInfo = step1.querySelector('.selected-size-info');
                if (selectedInfo) {
                    selectedInfo.remove();
                }
                
                // 「次へ」ボタンを非表示
                const nextBtn = document.getElementById('step1NextBtn');
                if (nextBtn) {
                    nextBtn.style.display = 'none';
                }
            }
            
            // localStorageからも削除
            localStorage.removeItem('selectedProduct');
            
            // 注文セクションを非表示
            const orderSection = document.getElementById('order');
            if (orderSection) {
                orderSection.style.display = 'none';
            }
        }
        
        // 段階的入力フロー開始関数
        function startStepInputFlow() {
            // 注文セクションを表示
            const orderSection = document.getElementById('order');
            if (orderSection) {
                orderSection.style.display = 'block';
                orderSection.scrollIntoView({ behavior: 'smooth' });
            }
            
            // ステップ1を表示
            const step1 = document.getElementById('step-1');
            if (step1) {
                step1.style.display = 'block';
            }
            
            // ステップインジケーターを更新
            updateStepIndicator(1);
        }
        
        // 決済ページに遷移する関数
        function goToPayment() {
            // 選択された商品情報を取得
            const selectedProduct = JSON.parse(localStorage.getItem('selectedProduct') || '{}');
            
            if (!selectedProduct.size || !selectedProduct.price) {
                alert('サイズを選択してください');
                return;
            }
            
            // 確認ダイアログ
            const confirmMessage = `選択されたサイズ: ${selectedProduct.size} サイズ - ¥${selectedProduct.price.toLocaleString()}（税込）\n\n決済ページに進みますか？`;
            if (!confirm(confirmMessage)) {
                return;
            }
            
            // 決済ページに遷移
            window.location.href = '/payment.html';
        }
        
        // ステップインジケーター更新関数
        function updateStepIndicator(currentStep) {
            const steps = document.querySelectorAll('.step');
            steps.forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index + 1 < currentStep) {
                    step.classList.add('completed');
                } else if (index + 1 === currentStep) {
                    step.classList.add('active');
                }
            });
            
            // プログレスバーを更新
            const progressBar = document.getElementById('progressBar');
            if (progressBar) {
                const progress = (currentStep / 5) * 100;
                progressBar.style.width = progress + '%';
            }
        }
        
        // ページ読み込み時に料金プランセクションを強制表示
        document.addEventListener('DOMContentLoaded', function() {
            const priceSection = document.getElementById('price');
            if (priceSection) {
                priceSection.style.display = 'block';
                priceSection.style.visibility = 'visible';
                priceSection.style.padding = '4rem 0';
                priceSection.style.backgroundColor = '#f8fafc';
            }
            
            const priceGrid = document.getElementById('price-grid');
            if (priceGrid) {
                priceGrid.style.display = 'grid';
                priceGrid.style.visibility = 'visible';
                priceGrid.style.gridTemplateColumns = 'repeat(auto-fit, minmax(300px, 1fr))';
                priceGrid.style.gap = '2rem';
                priceGrid.style.marginBottom = '2rem';
            }
        });
    </script>
</body>
</html>
